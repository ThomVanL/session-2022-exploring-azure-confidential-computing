#cloud-config
apt:
  preserve_sources_list: true
  sources:
    intel_sgx:
      # Key id expires: 2023-05-24
      keyid: 35BF D5E1 AEFF A8C4 996D  DD0D AA65 AD26 261B 320B
      source: "deb [arch=amd64] https://download.01.org/intel-sgx/sgx_repo/ubuntu focal main"
      keyserver: https://download.01.org/intel-sgx/sgx_repo/ubuntu/intel-sgx-deb.key
    llvm:
      source: "deb http://apt.llvm.org/focal/ llvm-toolchain-focal-10 main"
      keyserver: https://apt.llvm.org/llvm-snapshot.gpg.key
      keyid: 6084 F3CF 814B 57C1 CF12  EFD5 15CF 4D18 AF4F 7421
    microsoft:
      source: "deb [arch=amd64] https://packages.microsoft.com/ubuntu/20.04/prod focal main"
      keyserver: https://packages.microsoft.com/keys/microsoft.asc
      keyid: BC52 8686 B50D 79E3 39D3 721C EB3E 94AD BE12 29CF
package_upgrade: true
packages:
  - [build-essential, 12.8ubuntu1.1]
  - [cmake, 3.16.3-1ubuntu1]
  - [git, 1:2.25.1-1ubuntu3.5]
  - [clang-10, 1:10.0.1~++20211003085942+ef32c611aa21-1~exp1~20211003090334.2]
  - [libssl-dev, 1.1.1f-1ubuntu2.16]
  - [gdb, 9.2-0ubuntu1~20.04.1]
  - [libsgx-enclave-common, 2.17.100.3-focal1]
  - [libsgx-quote-ex, 2.17.100.3-focal1]
  - [libprotobuf17, 3.6.1.3-2ubuntu5]
  - [libsgx-dcap-ql, 1.14.100.3-focal1 ]
  - [libsgx-dcap-ql-dev, 1.14.100.3-focal1]
  - [az-dcap-client, 1.11.2]
  - [open-enclave, 0.18.2]
  - [scanmem, 0.17-3]
runcmd:
  - git clone https://github.com/ThomVanL/session-2022-exploring-azure-confidential-computing.git